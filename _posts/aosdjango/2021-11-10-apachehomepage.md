---
title: "[중간문제] Apache 와 연구실 서버.."
date: 2021-11-10

categories:
  - aosdjango
tags:
  - apache
  - django
---


# Apache와 연구실 서버


연구실 서버 IP가 회수된 이후... 
놀랍게도 새로운 서버 컴퓨터가 생겼다!

후후... 소음도 적고, 이전 컴퓨터보다 사양도 좋은 걸로 바꾸게 되었다.
하지만.. 기존 도메인과 아파치 서버를 다시 살리기 위해 설정을 다시 하게 되었다.

<br>

> "쿠쿡... 연구실 랩짱으로서 서버... [구성]해주마 "

<br>

크흠, 아무튼! 그래서 새로운 컴퓨터 IP 할당하고, 아파치 서버-홈페이지를 살리기까지... 대략 1주일이 걸렸다.

<br>

아파치 서버를 만들어서 ssh 접속까지는 문제가 없었다.
(ssh 접속 시 같은 네트워크여야 접속이 가능하다는 건 비밀...)

우선 ssh 접속 당시 문제들을 아래에 정리해두었다.

---

<br>

### 서버 작업에 필수적인 ssh... 

<br>

이 외부 접속에 관해서 hosts.conf, hosts.deny, hosts.allow 등 특정 ip를 차단하거나, 허용하는 등 여러 관리 파일이 있지만, ssh 접속에는 네트워크에 관한 설정이 필요하다.

<br>

- 관련 설정
    1. ufw(방화벽) 비활성화, ufw 활성화 후 22번 포트 열기 등 시도 → 해결 X
    2.  hosts.deny, hosts.allow 파일 수정 → 해결 X
    3. etc/resolv.conf 파일 수정 → 해결 X
    4. telnet, ping, nc, route 등 통신 확인 → 통신 원활 → But ssh 는 안됨.

<br>

<img width="400" alt="스크린샷 2021-11-10 오후 6 21 48" src="https://user-images.githubusercontent.com/47859845/141085906-76b5f5fa-806f-4de6-949d-ea62d10a8c02.png">


위 그림은 현재 서버가 있는 네트워크 network_2G와 다른 네트워크 eduroam 에서 ssh 접속을 시도하였다. 이 경우, ssh -vvv 아이디 호스트 명령어로 해당 로그를 보면, 호스트 네임을 못 받은 것으로 나오게 된다. 검색결과, 네트워크 통신에서 호스트 주소를 못 찾은 경우 이런 문제가 발생한다고 한다.

<br>

<img width="466" alt="스크린샷 2021-11-10 오후 6 21 58" src="https://user-images.githubusercontent.com/47859845/141086004-cd03acb4-a653-4377-87ae-e68d83d25ee8.png">



timeout의 경우 방화벽 문제가 많다고 하여 시도 했지만, 실패했다. 여기서 서버나 클라이언트 뿐만 아니라 그 사이에 있는 기기의 방화벽에서도 문제가 발생할 수 있다고 하였는데, 해당 ip 정책이 학교에서 할당하는 식이라 네트워크 정책 때문에 다른 네트워크 접속이 안되는 것일 수도 있겠다는 생각이 든다. (웹 접속은 되서 아마 ssh 같은 원격 통신만 차단한 걸로 추정..)

<br>

만약 그런 것이라면, 같은 네트워크 network_2G에서는 쉽게 접속이 되지만, 다른 네트워크에서는 차단되어 접속이 어려운 것이다.

<br>

이번에 느낀건 CGI, 게이트웨이 등에 대해서 이번기회에 더 공부하게 된것이다...
그 외에도 WSGI가 뭔지 실제 장고를 올리는 건 처음이라서, 이래저래 공부하게 된 것 같다.

<br>

---

<br>

### 홈페이지 아피치에 올리기

<br>

아파치에 WSGI로 장고로 만든 홈페이지를 올렸다!

<br>

장고를 로컬로 돌릴 때 python manage.py runserver 로 구동시킨것과 별개로 특정 포트를 열고, WSGI 데몬프로세스 경로를 장고경로로 지정해두면 해당 포트로 계속 실행시키는 방식인 것 같다.

<br>

이번에 올린 홈페이지는 아래 링크로 들어갈 수 있다. (연구실 홈페이지다.)

<br>

[CPS 홈페이지](http://cpslab.jejunu.ac.kr/)


<br>

홈페이지를 올릴때 vi 로 해당 파일을 확인하고 수정하고... 반복하다보니 vi는 어느정도 자유롭게 쓰게 된거 같다.

<br>

아무튼 우여곡절 끝에 systemctl restart/status apache 등 여러 명령어를 쓰는 기회가 된거같다.


이 홈페이지도 계속해서 업데이트해야하고, 앱도 업데이트… 운영체제 공부랑 토익도 해야하는데 일이 많다… ㅠㅠㅠㅠ

우선 당분간 운영체제와 토익에 전념해야할 거 같다.

<br>

> "졸업은 해야지..;;"

<br>

하고 싶은건 많은데 몸이 안따라주는 느낌.. 요새 추워져서 아침에 일어나기 힘들…

<br><br>